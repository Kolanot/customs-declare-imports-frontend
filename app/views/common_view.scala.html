@*
 * Copyright 2018 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import config.AppConfig
@import controllers.routes
@import domain.auth.AuthenticatedRequest
@import uk.gov.hmrc.play.views.html.helpers


@(form: Form[CommonForm])(implicit request:  Request[_], messages: Messages, appConfig: AppConfig)

@main_template(title = form("title").name, bodyClasses = None) {


    @helpers.form(routes.CommonController.submitForm) {
        <fieldset class="form-section">
            <legend>@form.data.get("title")</legend>
            <input type="hidden" name="title" value="@form.data.get("title")" />
            <input type="hidden" name="formName" value="@form.data.get("formName")" />
            <input type="hidden" name="url" value="@form.data.get("url")" />
            <input type="hidden" name="formAction" value="@form.data.get("formAction")" />
            <input type="hidden" name="id" value="@form.data.get("id")" />
            <input type="hidden" name="nextViewId" value="@form.data.get("nextViewId")" />

           @for(i <- 0 to form.get.fields.length - 1){
                @defining(i) {count =>
                    @defining(form.get.fields(i)){ element =>
                        <div class="form-group">
                        @if(element.fieldType == "input") {@helpers.input(
                            form("fields[" + count + "].fieldValue"),
                            'id -> element.id,
                            '_label -> element.label,
                            '_showConstraints -> false
                        )}
                            @if(element.fieldType == "textArea") {helpers.textArea(
                                form("fields[" + count + "].fieldValue"),
                                'id -> element.id,
                                '_label -> element.label,
                                '_showConstraints -> false
                                )}

                        </div>
                        <input type="hidden" name="fields[@count].label"  value=@element.label />
                        <input type="hidden" name="fields[@count].name"  value=@element.name />
                        <input type="hidden" name="fields[@count].fieldType"  value=@element.fieldType />
                        <input type="hidden" name="fields[@count].inputClass"  value=@element.inputClass />
                        <input type="hidden" name="fields[@count].divClass"  value=@element.divClass />
                        <input type="hidden" name="fields[@count].id"  value=@element.id />
                    }
                }
            }

            @***
            @for(field <- form.get.fields) {
                <div class="form-group">
                    <label class="form-label" for=@field.id>@field.label</label>
                    @if(field.fieldType =="input") {
                        <input class="form-control" id=@field.id type="text" name=@field.name value= @field.fieldValue> }
                    @if(field.fieldType =="textarea") {
                        <textarea class="form-control-3-4" id=@field.id name=@field.name  value= @field.fieldValue rows="5"></textarea>
                    }
                </div>
            } ****@
        </fieldset>
            <div class="form-field">
                <button class="button" type="submit">Submit</button>
            </div>

    }
}
